name: Lighthouse CI

on:
  push:
    branches: [ main ]

jobs:
  audit-production:
    name: Lighthouse CI (Production)
    runs-on: ubuntu-latest
    if: github.event_name == 'push' && github.ref == 'refs/heads/main'
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Lighthouse checks (elanorraliving.in)
        uses: treosh/lighthouse-ci-action@v10
        with:
          urls: |
            https://elanorraliving.in/
            https://elanorraliving.in/account
            https://elanorraliving.in/shop
          uploadArtifacts: true
          temporaryPublicStorage: true
          runs: 1
          configPath: ''
          thresholds: '{"performance":0.85,"pwa":0.8,"accessibility":0.9,"best-practices":0.9,"seo":0.9}'